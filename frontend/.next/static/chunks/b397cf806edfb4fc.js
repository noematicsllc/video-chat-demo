(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24136,38036,e=>{"use strict";var t=e.i(47167),o=e.i(71645);let n="auth_token";function l(e){localStorage.setItem(n,e)}function r(){return localStorage.getItem(n)}function u(){localStorage.removeItem(n)}function a(e){try{let t=JSON.parse(atob(e.split(".")[1]));return{sub:t.sub,name:t.name,preferred_username:t.preferred_username,email:t.email}}catch(e){return console.error("Failed to decode token:",e),null}}e.s(["clearToken",()=>u,"decodeToken",()=>a,"getToken",()=>r,"storeToken",()=>l],38036);let i=t.default.env.NEXT_PUBLIC_ZITADEL_ISSUER_URL||"",s=t.default.env.NEXT_PUBLIC_ZITADEL_CLIENT_ID||"";function c(){let[e,t]=(0,o.useState)(null),[n,c]=(0,o.useState)(!0),[d,f]=(0,o.useState)(null),m=!!(i&&s);return(0,o.useEffect)(()=>{let e=r();if(e){f(e);let o=a(e);o?t(o):(u(),f(null),t(null))}else f(null),t(null);c(!1)},[]),{user:e,token:d,loading:n,isAuthenticated:!!e&&!!d,login:()=>{if(!m)return void console.warn("Zitadel is not configured");let e=encodeURIComponent(`${window.location.origin}/auth/callback`),t=Math.random().toString(36).substring(7);sessionStorage.setItem("oauth_state",t);let o=`${i}/oauth/v2/authorize?client_id=${s}&redirect_uri=${e}&response_type=code&scope=openid profile email&state=${t}`;window.location.href=o},logout:()=>{u(),f(null),t(null)},setAuthToken:e=>{l(e),f(e);let o=a(e);o&&t(o)}}}e.s(["useAuth",()=>c],24136)}]);