module.exports=[87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},36395,47033,a=>{"use strict";var b=a.i(72131);function c(a){}function d(){return null}function e(){}function f(a){try{let b=JSON.parse(atob(a.split(".")[1]));return{sub:b.sub,name:b.name,preferred_username:b.preferred_username,email:b.email}}catch(a){return console.error("Failed to decode token:",a),null}}a.s(["clearToken",()=>e,"decodeToken",()=>f,"getToken",()=>d,"storeToken",()=>c],47033);let g=process.env.NEXT_PUBLIC_ZITADEL_ISSUER_URL||"",h=process.env.NEXT_PUBLIC_ZITADEL_CLIENT_ID||"";function i(){let[a,i]=(0,b.useState)(null),[j,k]=(0,b.useState)(!0),[l,m]=(0,b.useState)(null),n=!!(g&&h);return(0,b.useEffect)(()=>{let a=d();if(a){m(a);let b=f(a);b?i(b):(e(),m(null),i(null))}else m(null),i(null);k(!1)},[]),{user:a,token:l,loading:j,isAuthenticated:!!a&&!!l,login:()=>{n?(encodeURIComponent(""),Math.random().toString(36).substring(7)):console.warn("Zitadel is not configured")},logout:()=>{e(),m(null),i(null)},setAuthToken:a=>{c(a),m(a);let b=f(a);b&&i(b)}}}a.s(["useAuth",()=>i],36395)},27850,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(36395);function f(){let a=(0,d.useRouter)(),f=(0,d.useSearchParams)(),{setAuthToken:g}=(0,e.useAuth)(),[h,i]=(0,c.useState)(null);return((0,c.useEffect)(()=>{(async()=>{let b=f.get("error");if(b){i(`Authentication error: ${b}`),setTimeout(()=>a.push("/"),3e3);return}let c=f.get("code");if(!c){i("No authorization code received"),setTimeout(()=>a.push("/"),3e3);return}try{let b=`${window.location.origin}/auth/callback`,d=await fetch("/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:c,redirectUri:b})});if(!d.ok){let a=await d.json();throw Error(a.error||"Token exchange failed")}let e=await d.json();if(!e.token)throw Error("No token received from server");g(e.token),a.push("/")}catch(b){console.error("Callback error:",b),i(b instanceof Error?b.message:"Authentication failed"),setTimeout(()=>a.push("/"),3e3)}})()},[f,a,g]),h)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-destructive mb-4",children:"Authentication Error"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:h}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground mt-4",children:"Redirecting to home page..."})]})}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Completing authentication..."})]})})}function g(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}),children:(0,b.jsx)(f,{})})}a.s(["default",()=>g])}];

//# sourceMappingURL=_1553c16b._.js.map